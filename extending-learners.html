<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.1 Adding new Learners | mlr3 book</title>
  <meta name="description" content="6.1 Adding new Learners | mlr3 book" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="6.1 Adding new Learners | mlr3 book" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://mlr3book.mlr-org.com/" />
  <meta property="og:image" content="https://mlr3book.mlr-org.com/block.png" />
  
  <meta name="github-repo" content="mlr-org/mlr3book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.1 Adding new Learners | mlr3 book" />
  
  
  <meta name="twitter:image" content="https://mlr3book.mlr-org.com/block.png" />

<meta name="author" content="Michel Lang" />
<meta name="author" content="Patrick Schratz" />
<meta name="author" content="Martin Binder" />
<meta name="author" content="Florian Pfisterer" />
<meta name="author" content="Jakob Richter" />
<meta name="author" content="Nicholas G. Reich" />
<meta name="author" content="Bernd Bischl" />


<meta name="date" content="2020-08-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="apple-touch-icon.png" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="extending.html"/>
<link rel="next" href="extending-measures.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">mlr3 Manual <img src='https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png' width=30 /></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Quickstart</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction and Overview</a></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Basics</a><ul>
<li class="chapter" data-level="2.1" data-path="r6.html"><a href="r6.html"><i class="fa fa-check"></i><b>2.1</b> Quick R6 Intro for Beginners</a></li>
<li class="chapter" data-level="2.2" data-path="tasks.html"><a href="tasks.html"><i class="fa fa-check"></i><b>2.2</b> Tasks</a><ul>
<li class="chapter" data-level="2.2.1" data-path="tasks.html"><a href="tasks.html#tasks-types"><i class="fa fa-check"></i><b>2.2.1</b> Task Types</a></li>
<li class="chapter" data-level="2.2.2" data-path="tasks.html"><a href="tasks.html#tasks-creation"><i class="fa fa-check"></i><b>2.2.2</b> Task Creation</a></li>
<li class="chapter" data-level="2.2.3" data-path="tasks.html"><a href="tasks.html#tasks-predefined"><i class="fa fa-check"></i><b>2.2.3</b> Predefined tasks</a></li>
<li class="chapter" data-level="2.2.4" data-path="tasks.html"><a href="tasks.html#tasks-api"><i class="fa fa-check"></i><b>2.2.4</b> Task API</a><ul>
<li class="chapter" data-level="2.2.4.1" data-path="tasks.html"><a href="tasks.html#tasks-retrieving"><i class="fa fa-check"></i><b>2.2.4.1</b> Retrieving Data</a></li>
<li class="chapter" data-level="2.2.4.2" data-path="tasks.html"><a href="tasks.html#tasks-roles"><i class="fa fa-check"></i><b>2.2.4.2</b> Roles (Rows and Columns)</a></li>
<li class="chapter" data-level="2.2.4.3" data-path="tasks.html"><a href="tasks.html#tasks-mutators"><i class="fa fa-check"></i><b>2.2.4.3</b> Task Mutators</a></li>
</ul></li>
<li class="chapter" data-level="2.2.5" data-path="tasks.html"><a href="tasks.html#autoplot-task"><i class="fa fa-check"></i><b>2.2.5</b> Plotting Tasks</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="learners.html"><a href="learners.html"><i class="fa fa-check"></i><b>2.3</b> Learners</a><ul>
<li class="chapter" data-level="2.3.1" data-path="learners.html"><a href="learners.html#learners-predefined"><i class="fa fa-check"></i><b>2.3.1</b> Predefined Learners</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="train-predict.html"><a href="train-predict.html"><i class="fa fa-check"></i><b>2.4</b> Train and Predict</a><ul>
<li class="chapter" data-level="2.4.1" data-path="train-predict.html"><a href="train-predict.html#train-predict-objects"><i class="fa fa-check"></i><b>2.4.1</b> Creating Task and Learner Objects</a></li>
<li class="chapter" data-level="2.4.2" data-path="train-predict.html"><a href="train-predict.html#split-data"><i class="fa fa-check"></i><b>2.4.2</b> Setting up the train/test splits of the data</a></li>
<li class="chapter" data-level="2.4.3" data-path="train-predict.html"><a href="train-predict.html#training"><i class="fa fa-check"></i><b>2.4.3</b> Training the learner</a></li>
<li class="chapter" data-level="2.4.4" data-path="train-predict.html"><a href="train-predict.html#predicting"><i class="fa fa-check"></i><b>2.4.4</b> Predicting</a></li>
<li class="chapter" data-level="2.4.5" data-path="train-predict.html"><a href="train-predict.html#predict-type"><i class="fa fa-check"></i><b>2.4.5</b> Changing the Predict Type</a></li>
<li class="chapter" data-level="2.4.6" data-path="train-predict.html"><a href="train-predict.html#autoplot-prediction"><i class="fa fa-check"></i><b>2.4.6</b> Plotting Predictions</a></li>
<li class="chapter" data-level="2.4.7" data-path="train-predict.html"><a href="train-predict.html#measure"><i class="fa fa-check"></i><b>2.4.7</b> Performance assessment</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="resampling.html"><a href="resampling.html"><i class="fa fa-check"></i><b>2.5</b> Resampling</a><ul>
<li class="chapter" data-level="2.5.1" data-path="resampling.html"><a href="resampling.html#resampling-settings"><i class="fa fa-check"></i><b>2.5.1</b> Settings</a></li>
<li class="chapter" data-level="2.5.2" data-path="resampling.html"><a href="resampling.html#resampling-inst"><i class="fa fa-check"></i><b>2.5.2</b> Instantiation</a></li>
<li class="chapter" data-level="2.5.3" data-path="resampling.html"><a href="resampling.html#resampling-exec"><i class="fa fa-check"></i><b>2.5.3</b> Execution</a></li>
<li class="chapter" data-level="2.5.4" data-path="resampling.html"><a href="resampling.html#resamp-custom"><i class="fa fa-check"></i><b>2.5.4</b> Custom resampling</a></li>
<li class="chapter" data-level="2.5.5" data-path="resampling.html"><a href="resampling.html#autoplot-resampleresult"><i class="fa fa-check"></i><b>2.5.5</b> Plotting Resample Results</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="benchmarking.html"><a href="benchmarking.html"><i class="fa fa-check"></i><b>2.6</b> Benchmarking</a><ul>
<li class="chapter" data-level="2.6.1" data-path="benchmarking.html"><a href="benchmarking.html#bm-design"><i class="fa fa-check"></i><b>2.6.1</b> Design Creation</a></li>
<li class="chapter" data-level="2.6.2" data-path="benchmarking.html"><a href="benchmarking.html#bm-exec"><i class="fa fa-check"></i><b>2.6.2</b> Execution and Aggregation of Results</a></li>
<li class="chapter" data-level="2.6.3" data-path="benchmarking.html"><a href="benchmarking.html#autoplot-benchmarkresult"><i class="fa fa-check"></i><b>2.6.3</b> Plotting Benchmark Results</a></li>
<li class="chapter" data-level="2.6.4" data-path="benchmarking.html"><a href="benchmarking.html#bm-resamp"><i class="fa fa-check"></i><b>2.6.4</b> Extracting ResampleResults</a></li>
<li class="chapter" data-level="2.6.5" data-path="benchmarking.html"><a href="benchmarking.html#converting-and-merging-resampleresults"><i class="fa fa-check"></i><b>2.6.5</b> Converting and Merging ResampleResults</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="binary-classification.html"><a href="binary-classification.html"><i class="fa fa-check"></i><b>2.7</b> Binary classification</a><ul>
<li class="chapter" data-level="2.7.1" data-path="binary-classification.html"><a href="binary-classification.html#binary-roc"><i class="fa fa-check"></i><b>2.7.1</b> ROC Curve and Thresholds</a></li>
<li class="chapter" data-level="2.7.2" data-path="binary-classification.html"><a href="binary-classification.html#threshold-tuning"><i class="fa fa-check"></i><b>2.7.2</b> Threshold Tuning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>3</b> Model Optimization</a><ul>
<li class="chapter" data-level="3.1" data-path="tuning.html"><a href="tuning.html"><i class="fa fa-check"></i><b>3.1</b> Hyperparameter Tuning</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tuning.html"><a href="tuning.html#tuning-optimization"><i class="fa fa-check"></i><b>3.1.1</b> The <code>TuningInstance</code> Classes</a></li>
<li class="chapter" data-level="3.1.2" data-path="tuning.html"><a href="tuning.html#the-tuner-class"><i class="fa fa-check"></i><b>3.1.2</b> The <code>Tuner</code> Class</a></li>
<li class="chapter" data-level="3.1.3" data-path="tuning.html"><a href="tuning.html#tuning-triggering"><i class="fa fa-check"></i><b>3.1.3</b> Triggering the Tuning</a></li>
<li class="chapter" data-level="3.1.4" data-path="tuning.html"><a href="tuning.html#autotuner"><i class="fa fa-check"></i><b>3.1.4</b> Automating the Tuning</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="fs.html"><a href="fs.html"><i class="fa fa-check"></i><b>3.2</b> Feature Selection / Filtering</a><ul>
<li class="chapter" data-level="3.2.1" data-path="fs.html"><a href="fs.html#fs-filter"><i class="fa fa-check"></i><b>3.2.1</b> Filters</a></li>
<li class="chapter" data-level="3.2.2" data-path="fs.html"><a href="fs.html#fs-calc"><i class="fa fa-check"></i><b>3.2.2</b> Calculating filter values</a></li>
<li class="chapter" data-level="3.2.3" data-path="fs.html"><a href="fs.html#fs-var-imp-filters"><i class="fa fa-check"></i><b>3.2.3</b> Variable Importance Filters</a></li>
<li class="chapter" data-level="3.2.4" data-path="fs.html"><a href="fs.html#fs-ensemble"><i class="fa fa-check"></i><b>3.2.4</b> Ensemble Methods</a></li>
<li class="chapter" data-level="3.2.5" data-path="fs.html"><a href="fs.html#fs-wrapper"><i class="fa fa-check"></i><b>3.2.5</b> Wrapper Methods</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="nested-resampling.html"><a href="nested-resampling.html"><i class="fa fa-check"></i><b>3.3</b> Nested Resampling</a><ul>
<li class="chapter" data-level="3.3.1" data-path="nested-resampling.html"><a href="nested-resampling.html#nested-resamp-exec"><i class="fa fa-check"></i><b>3.3.1</b> Execution</a></li>
<li class="chapter" data-level="3.3.2" data-path="nested-resampling.html"><a href="nested-resampling.html#nested-resamp-eval"><i class="fa fa-check"></i><b>3.3.2</b> Evaluation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipelines.html"><a href="pipelines.html"><i class="fa fa-check"></i><b>4</b> Pipelines</a><ul>
<li class="chapter" data-level="4.1" data-path="pipe-pipeops.html"><a href="pipe-pipeops.html"><i class="fa fa-check"></i><b>4.1</b> The Building Blocks: PipeOps</a></li>
<li class="chapter" data-level="4.2" data-path="pipe-operator.html"><a href="pipe-operator.html"><i class="fa fa-check"></i><b>4.2</b> The Pipeline Operator: <code>%&gt;&gt;%</code></a></li>
<li class="chapter" data-level="4.3" data-path="pipe-nodes-edges-graphs.html"><a href="pipe-nodes-edges-graphs.html"><i class="fa fa-check"></i><b>4.3</b> Nodes, Edges and Graphs</a></li>
<li class="chapter" data-level="4.4" data-path="pipe-modeling.html"><a href="pipe-modeling.html"><i class="fa fa-check"></i><b>4.4</b> Modeling</a><ul>
<li class="chapter" data-level="4.4.1" data-path="pipe-modeling.html"><a href="pipe-modeling.html#pipe-hyperpars"><i class="fa fa-check"></i><b>4.4.1</b> Setting Hyperparameters</a></li>
<li class="chapter" data-level="4.4.2" data-path="pipe-modeling.html"><a href="pipe-modeling.html#pipe-tuning"><i class="fa fa-check"></i><b>4.4.2</b> Tuning</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html"><i class="fa fa-check"></i><b>4.5</b> Non-Linear Graphs</a><ul>
<li class="chapter" data-level="4.5.1" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-branching-copying"><i class="fa fa-check"></i><b>4.5.1</b> Branching &amp; Copying</a></li>
<li class="chapter" data-level="4.5.2" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles"><i class="fa fa-check"></i><b>4.5.2</b> Model Ensembles</a><ul>
<li class="chapter" data-level="4.5.2.1" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-bagging"><i class="fa fa-check"></i><b>4.5.2.1</b> Bagging</a></li>
<li class="chapter" data-level="4.5.2.2" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-stacking"><i class="fa fa-check"></i><b>4.5.2.2</b> Stacking</a></li>
<li class="chapter" data-level="4.5.2.3" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#multilevel-stacking"><i class="fa fa-check"></i><b>4.5.2.3</b> Multilevel Stacking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html"><i class="fa fa-check"></i><b>4.6</b> Special Operators</a><ul>
<li class="chapter" data-level="4.6.1" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#imputation-pipeopimpute"><i class="fa fa-check"></i><b>4.6.1</b> Imputation: <code>PipeOpImpute</code></a></li>
<li class="chapter" data-level="4.6.2" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#feature-engineering-pipeopmutate"><i class="fa fa-check"></i><b>4.6.2</b> Feature Engineering: <code>PipeOpMutate</code></a></li>
<li class="chapter" data-level="4.6.3" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#training-on-data-subsets-pipeopchunk"><i class="fa fa-check"></i><b>4.6.3</b> Training on data subsets: <code>PipeOpChunk</code></a></li>
<li class="chapter" data-level="4.6.4" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#feature-selection-pipeopfilter-and-pipeopselect"><i class="fa fa-check"></i><b>4.6.4</b> Feature Selection: <code>PipeOpFilter</code> and <code>PipeOpSelect</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html"><i class="fa fa-check"></i><b>4.7</b> In-depth look into mlr3pipelines</a><ul>
<li class="chapter" data-level="4.7.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#whats-the-point"><i class="fa fa-check"></i><b>4.7.1</b> What’s the Point</a></li>
<li class="chapter" data-level="4.7.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-pipeline-operators"><i class="fa fa-check"></i><b>4.7.2</b> <code>PipeOp</code>: Pipeline Operators</a><ul>
<li class="chapter" data-level="4.7.2.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#why-the-state"><i class="fa fa-check"></i><b>4.7.2.1</b> Why the <code>$state</code></a></li>
<li class="chapter" data-level="4.7.2.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#where-to-get-pipeops"><i class="fa fa-check"></i><b>4.7.2.2</b> Where to Get <code>PipeOp</code>s</a></li>
</ul></li>
<li class="chapter" data-level="4.7.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-channels"><i class="fa fa-check"></i><b>4.7.3</b> PipeOp Channels</a><ul>
<li class="chapter" data-level="4.7.3.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#input-channels"><i class="fa fa-check"></i><b>4.7.3.1</b> Input Channels</a></li>
<li class="chapter" data-level="4.7.3.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#output-channels"><i class="fa fa-check"></i><b>4.7.3.2</b> Output Channels</a></li>
<li class="chapter" data-level="4.7.3.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#channel-configuration"><i class="fa fa-check"></i><b>4.7.3.3</b> Channel Configuration</a></li>
</ul></li>
<li class="chapter" data-level="4.7.4" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#graph-networks-of-pipeops"><i class="fa fa-check"></i><b>4.7.4</b> <code>Graph</code>: Networks of <code>PipeOp</code>s</a><ul>
<li class="chapter" data-level="4.7.4.1" data-path="basics.html"><a href="basics.html#basics"><i class="fa fa-check"></i><b>4.7.4.1</b> Basics</a></li>
<li class="chapter" data-level="4.7.4.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#networks"><i class="fa fa-check"></i><b>4.7.4.2</b> Networks</a></li>
<li class="chapter" data-level="4.7.4.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#syntactic-sugar"><i class="fa fa-check"></i><b>4.7.4.3</b> Syntactic Sugar</a></li>
<li class="chapter" data-level="4.7.4.4" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-ids-and-id-name-clashes"><i class="fa fa-check"></i><b>4.7.4.4</b> <code>PipeOp</code> IDs and ID Name Clashes</a></li>
</ul></li>
<li class="chapter" data-level="4.7.5" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#learners-in-graphs-graphs-in-learners"><i class="fa fa-check"></i><b>4.7.5</b> Learners in Graphs, Graphs in Learners</a><ul>
<li class="chapter" data-level="4.7.5.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeoplearner"><i class="fa fa-check"></i><b>4.7.5.1</b> <code>PipeOpLearner</code></a></li>
<li class="chapter" data-level="4.7.5.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#graphlearner"><i class="fa fa-check"></i><b>4.7.5.2</b> <code>GraphLearner</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7.6" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#hyperparameters"><i class="fa fa-check"></i><b>4.7.6</b> Hyperparameters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="technical.html"><a href="technical.html"><i class="fa fa-check"></i><b>5</b> Technical</a><ul>
<li class="chapter" data-level="5.1" data-path="parallelization.html"><a href="parallelization.html"><i class="fa fa-check"></i><b>5.1</b> Parallelization</a></li>
<li class="chapter" data-level="5.2" data-path="error-handling.html"><a href="error-handling.html"><i class="fa fa-check"></i><b>5.2</b> Error Handling</a><ul>
<li class="chapter" data-level="5.2.1" data-path="error-handling.html"><a href="error-handling.html#encapsulation"><i class="fa fa-check"></i><b>5.2.1</b> Encapsulation</a></li>
<li class="chapter" data-level="5.2.2" data-path="error-handling.html"><a href="error-handling.html#fallback-learners"><i class="fa fa-check"></i><b>5.2.2</b> Fallback learners</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="backends.html"><a href="backends.html"><i class="fa fa-check"></i><b>5.3</b> Database Backends</a><ul>
<li class="chapter" data-level="5.3.1" data-path="backends.html"><a href="backends.html#use-case-nyc-flights"><i class="fa fa-check"></i><b>5.3.1</b> Use Case: NYC Flights</a></li>
<li class="chapter" data-level="5.3.2" data-path="backends.html"><a href="backends.html#preprocessing-with-dplyr"><i class="fa fa-check"></i><b>5.3.2</b> Preprocessing with <code>dplyr</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="backends.html"><a href="backends.html#databackenddplyr"><i class="fa fa-check"></i><b>5.3.3</b> DataBackendDplyr</a></li>
<li class="chapter" data-level="5.3.4" data-path="backends.html"><a href="backends.html#model-fitting"><i class="fa fa-check"></i><b>5.3.4</b> Model fitting</a></li>
<li class="chapter" data-level="5.3.5" data-path="backends.html"><a href="backends.html#cleanup"><i class="fa fa-check"></i><b>5.3.5</b> Cleanup</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="paradox.html"><a href="paradox.html"><i class="fa fa-check"></i><b>5.4</b> Parameters (using <code>paradox</code>)</a><ul>
<li class="chapter" data-level="5.4.1" data-path="paradox.html"><a href="paradox.html#reference-based-objects"><i class="fa fa-check"></i><b>5.4.1</b> Reference Based Objects</a></li>
<li class="chapter" data-level="5.4.2" data-path="paradox.html"><a href="paradox.html#defining-a-parameter-space"><i class="fa fa-check"></i><b>5.4.2</b> Defining a Parameter Space</a><ul>
<li class="chapter" data-level="5.4.2.1" data-path="paradox.html"><a href="paradox.html#single-parameters"><i class="fa fa-check"></i><b>5.4.2.1</b> Single Parameters</a></li>
<li class="chapter" data-level="5.4.2.2" data-path="paradox.html"><a href="paradox.html#parameter-sets"><i class="fa fa-check"></i><b>5.4.2.2</b> Parameter Sets</a></li>
<li class="chapter" data-level="5.4.2.3" data-path="paradox.html"><a href="paradox.html#vector-parameters"><i class="fa fa-check"></i><b>5.4.2.3</b> Vector Parameters</a></li>
</ul></li>
<li class="chapter" data-level="5.4.3" data-path="paradox.html"><a href="paradox.html#parameter-sampling"><i class="fa fa-check"></i><b>5.4.3</b> Parameter Sampling</a><ul>
<li class="chapter" data-level="5.4.3.1" data-path="paradox.html"><a href="paradox.html#parameter-designs"><i class="fa fa-check"></i><b>5.4.3.1</b> Parameter Designs</a></li>
<li class="chapter" data-level="5.4.3.2" data-path="paradox.html"><a href="paradox.html#grid-design"><i class="fa fa-check"></i><b>5.4.3.2</b> Grid Design</a></li>
<li class="chapter" data-level="5.4.3.3" data-path="paradox.html"><a href="paradox.html#random-sampling"><i class="fa fa-check"></i><b>5.4.3.3</b> Random Sampling</a></li>
<li class="chapter" data-level="5.4.3.4" data-path="paradox.html"><a href="paradox.html#generalized-sampling-the-sampler-class"><i class="fa fa-check"></i><b>5.4.3.4</b> Generalized Sampling: The <code>Sampler</code> Class</a></li>
</ul></li>
<li class="chapter" data-level="5.4.4" data-path="paradox.html"><a href="paradox.html#parameter-transformation"><i class="fa fa-check"></i><b>5.4.4</b> Parameter Transformation</a><ul>
<li class="chapter" data-level="5.4.4.1" data-path="paradox.html"><a href="paradox.html#transformation-between-types"><i class="fa fa-check"></i><b>5.4.4.1</b> Transformation between Types</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="logging.html"><a href="logging.html"><i class="fa fa-check"></i><b>5.5</b> Logging</a><ul>
<li class="chapter" data-level="5.5.1" data-path="logging.html"><a href="logging.html#changing-mlr3-logging-levels"><i class="fa fa-check"></i><b>5.5.1</b> Changing mlr3 logging levels</a></li>
<li class="chapter" data-level="5.5.2" data-path="logging.html"><a href="logging.html#redirecting-output"><i class="fa fa-check"></i><b>5.5.2</b> Redirecting output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="extending.html"><a href="extending.html"><i class="fa fa-check"></i><b>6</b> Extending</a><ul>
<li class="chapter" data-level="6.1" data-path="extending-learners.html"><a href="extending-learners.html"><i class="fa fa-check"></i><b>6.1</b> Adding new Learners</a><ul>
<li class="chapter" data-level="6.1.1" data-path="extending-learners.html"><a href="extending-learners.html#learner-meta-information"><i class="fa fa-check"></i><b>6.1.1</b> Meta-information</a></li>
<li class="chapter" data-level="6.1.2" data-path="extending-learners.html"><a href="extending-learners.html#learner-train"><i class="fa fa-check"></i><b>6.1.2</b> Train function</a></li>
<li class="chapter" data-level="6.1.3" data-path="extending-learners.html"><a href="extending-learners.html#learner-predict"><i class="fa fa-check"></i><b>6.1.3</b> Predict function</a></li>
<li class="chapter" data-level="6.1.4" data-path="extending-learners.html"><a href="extending-learners.html#learner-control"><i class="fa fa-check"></i><b>6.1.4</b> Control objects/functions of learners</a></li>
<li class="chapter" data-level="6.1.5" data-path="extending-learners.html"><a href="extending-learners.html#learner-test"><i class="fa fa-check"></i><b>6.1.5</b> Testing the learner</a><ul>
<li class="chapter" data-level="6.1.5.1" data-path="extending-learners.html"><a href="extending-learners.html#train-and-predict"><i class="fa fa-check"></i><b>6.1.5.1</b> Train and Predict</a></li>
<li class="chapter" data-level="6.1.5.2" data-path="extending-learners.html"><a href="extending-learners.html#checking-parameters"><i class="fa fa-check"></i><b>6.1.5.2</b> Checking Parameters</a></li>
</ul></li>
<li class="chapter" data-level="6.1.6" data-path="extending-learners.html"><a href="extending-learners.html#learner-faq"><i class="fa fa-check"></i><b>6.1.6</b> Learner FAQ</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="extending-measures.html"><a href="extending-measures.html"><i class="fa fa-check"></i><b>6.2</b> Adding new Measures</a></li>
<li class="chapter" data-level="6.3" data-path="extending-pipeops.html"><a href="extending-pipeops.html"><i class="fa fa-check"></i><b>6.3</b> Adding new PipeOps</a><ul>
<li class="chapter" data-level="6.3.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipeopcopy"><i class="fa fa-check"></i><b>6.3.1</b> General Case Example: <code>PipeOpCopy</code></a><ul>
<li class="chapter" data-level="6.3.1.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#first-steps-inheriting-from-pipeop"><i class="fa fa-check"></i><b>6.3.1.1</b> First Steps: Inheriting from <code>PipeOp</code></a></li>
<li class="chapter" data-level="6.3.1.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#channel-definitions"><i class="fa fa-check"></i><b>6.3.1.2</b> Channel Definitions</a></li>
<li class="chapter" data-level="6.3.1.3" data-path="extending-learners.html"><a href="extending-learners.html#train-and-predict"><i class="fa fa-check"></i><b>6.3.1.3</b> Train and Predict</a></li>
<li class="chapter" data-level="6.3.1.4" data-path="extending-pipeops.html"><a href="extending-pipeops.html#putting-it-together"><i class="fa fa-check"></i><b>6.3.1.4</b> Putting it Together</a></li>
</ul></li>
<li class="chapter" data-level="6.3.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipe-preproc"><i class="fa fa-check"></i><b>6.3.2</b> Special Case: Preprocessing</a><ul>
<li class="chapter" data-level="6.3.2.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopdropna"><i class="fa fa-check"></i><b>6.3.2.1</b> Example: <code>PipeOpDropNA</code></a></li>
<li class="chapter" data-level="6.3.2.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopscalealways"><i class="fa fa-check"></i><b>6.3.2.2</b> Example: <code>PipeOpScaleAlways</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3.3" data-path="extending-pipeops.html"><a href="extending-pipeops.html#special-case-preprocessing-with-simple-train"><i class="fa fa-check"></i><b>6.3.3</b> Special Case: Preprocessing with Simple Train</a><ul>
<li class="chapter" data-level="6.3.3.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopdropconst"><i class="fa fa-check"></i><b>6.3.3.1</b> Example: <code>PipeOpDropConst</code></a></li>
<li class="chapter" data-level="6.3.3.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopscalealwayssimple"><i class="fa fa-check"></i><b>6.3.3.2</b> Example: <code>PipeOpScaleAlwaysSimple</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3.4" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipe-hyperpars"><i class="fa fa-check"></i><b>6.3.4</b> Hyperparameters</a><ul>
<li class="chapter" data-level="6.3.4.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#hyperparameter-example-pipeopscale"><i class="fa fa-check"></i><b>6.3.4.1</b> Hyperparameter Example: <code>PipeOpScale</code></a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="special-tasks.html"><a href="special-tasks.html"><i class="fa fa-check"></i><b>7</b> Special Tasks</a><ul>
<li class="chapter" data-level="7.1" data-path="survival.html"><a href="survival.html"><i class="fa fa-check"></i><b>7.1</b> Survival Analysis</a><ul>
<li class="chapter" data-level="7.1.1" data-path="survival.html"><a href="survival.html#tasksurv"><i class="fa fa-check"></i><b>7.1.1</b> TaskSurv</a></li>
<li class="chapter" data-level="7.1.2" data-path="survival.html"><a href="survival.html#predict-types---crank-lp-and-distr"><i class="fa fa-check"></i><b>7.1.2</b> Predict Types - crank, lp, and distr</a></li>
<li class="chapter" data-level="7.1.3" data-path="survival.html"><a href="survival.html#composition"><i class="fa fa-check"></i><b>7.1.3</b> Composition</a></li>
<li class="chapter" data-level="7.1.4" data-path="survival.html"><a href="survival.html#benchmark-experiment"><i class="fa fa-check"></i><b>7.1.4</b> Benchmark Experiment</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="spatial.html"><a href="spatial.html"><i class="fa fa-check"></i><b>7.2</b> Spatial Analysis</a></li>
<li class="chapter" data-level="7.3" data-path="ordinal.html"><a href="ordinal.html"><i class="fa fa-check"></i><b>7.3</b> Ordinal Analysis</a></li>
<li class="chapter" data-level="7.4" data-path="functional.html"><a href="functional.html"><i class="fa fa-check"></i><b>7.4</b> Functional Analysis</a><ul>
<li class="chapter" data-level="7.4.1" data-path="functional.html"><a href="functional.html#how-to-model-functional-data"><i class="fa fa-check"></i><b>7.4.1</b> How to model functional data?</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="multilabel.html"><a href="multilabel.html"><i class="fa fa-check"></i><b>7.5</b> Multilabel Classification</a></li>
<li class="chapter" data-level="7.6" data-path="cost-sens.html"><a href="cost-sens.html"><i class="fa fa-check"></i><b>7.6</b> Cost-Sensitive Classification</a><ul>
<li class="chapter" data-level="7.6.1" data-path="cost-sens.html"><a href="cost-sens.html#a-first-model"><i class="fa fa-check"></i><b>7.6.1</b> A First Model</a></li>
<li class="chapter" data-level="7.6.2" data-path="cost-sens.html"><a href="cost-sens.html#cost-sensitive-measure"><i class="fa fa-check"></i><b>7.6.2</b> Cost-sensitive Measure</a></li>
<li class="chapter" data-level="7.6.3" data-path="cost-sens.html"><a href="cost-sens.html#thresholding"><i class="fa fa-check"></i><b>7.6.3</b> Thresholding</a></li>
<li class="chapter" data-level="7.6.4" data-path="binary-classification.html"><a href="binary-classification.html#threshold-tuning"><i class="fa fa-check"></i><b>7.6.4</b> Threshold Tuning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="interpretation.html"><a href="interpretation.html"><i class="fa fa-check"></i><b>8</b> Model Interpretation</a><ul>
<li class="chapter" data-level="8.1" data-path="iml.html"><a href="iml.html"><i class="fa fa-check"></i><b>8.1</b> IML</a></li>
<li class="chapter" data-level="8.2" data-path="interpretability-dalex.html"><a href="interpretability-dalex.html"><i class="fa fa-check"></i><b>8.2</b> DALEX</a><ul>
<li class="chapter" data-level="8.2.1" data-path="interpretability-dalex.html"><a href="interpretability-dalex.html#interpretability-dalex-introduction"><i class="fa fa-check"></i><b>8.2.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2.2" data-path="interpretability-dalex.html"><a href="interpretability-dalex.html#interpretability-data-fifa"><i class="fa fa-check"></i><b>8.2.2</b> Read data: FIFA</a></li>
<li class="chapter" data-level="8.2.3" data-path="interpretability-dalex.html"><a href="interpretability-dalex.html#interpretability-train-ranger"><i class="fa fa-check"></i><b>8.2.3</b> Train a model: Ranger</a></li>
<li class="chapter" data-level="8.2.4" data-path="interpretability-dalex.html"><a href="interpretability-dalex.html#interpretability-architecture"><i class="fa fa-check"></i><b>8.2.4</b> The general workflow</a></li>
<li class="chapter" data-level="8.2.5" data-path="interpretability-dalex.html"><a href="interpretability-dalex.html#interpretability-dataset-level"><i class="fa fa-check"></i><b>8.2.5</b> Dataset level exploration</a></li>
<li class="chapter" data-level="8.2.6" data-path="interpretability-dalex.html"><a href="interpretability-dalex.html#interpretability-instance-level"><i class="fa fa-check"></i><b>8.2.6</b> Instance level explanation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>9</b> Appendix</a><ul>
<li class="chapter" data-level="9.1" data-path="list-learners.html"><a href="list-learners.html"><i class="fa fa-check"></i><b>9.1</b> Integrated Learners</a></li>
<li class="chapter" data-level="9.2" data-path="list-measures.html"><a href="list-measures.html"><i class="fa fa-check"></i><b>9.2</b> Integrated Performance Measures</a></li>
<li class="chapter" data-level="9.3" data-path="list-filters.html"><a href="list-filters.html"><i class="fa fa-check"></i><b>9.3</b> Integrated Filter Methods</a><ul>
<li class="chapter" data-level="9.3.1" data-path="list-filters.html"><a href="list-filters.html#fs-filter-list"><i class="fa fa-check"></i><b>9.3.1</b> Standalone filter methods</a></li>
<li class="chapter" data-level="9.3.2" data-path="list-filters.html"><a href="list-filters.html#fs-filter-embedded-list"><i class="fa fa-check"></i><b>9.3.2</b> Learners With Embedded Filter Methods</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="list-pipeops.html"><a href="list-pipeops.html"><i class="fa fa-check"></i><b>9.4</b> Integrated Pipe Operators</a></li>
<li class="chapter" data-level="9.5" data-path="compare-frameworks.html"><a href="compare-frameworks.html"><i class="fa fa-check"></i><b>9.5</b> Framework Comparison</a><ul>
<li class="chapter" data-level="9.5.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#an-introduction-to-pipeops"><i class="fa fa-check"></i><b>9.5.1</b> An introduction to “PipeOp”s</a><ul>
<li class="chapter" data-level="9.5.1.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#a-quick-glance-into-a-pipeop"><i class="fa fa-check"></i><b>9.5.1.1</b> A quick glance into a PipeOp</a></li>
<li class="chapter" data-level="9.5.1.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#constructing-the-pipeline"><i class="fa fa-check"></i><b>9.5.1.2</b> Constructing the Pipeline</a></li>
</ul></li>
<li class="chapter" data-level="9.5.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs.mlr"><i class="fa fa-check"></i><b>9.5.2</b> mlr3pipelines vs. mlr</a><ul>
<li class="chapter" data-level="9.5.2.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr"><i class="fa fa-check"></i><b>9.5.2.1</b> mlr</a></li>
<li class="chapter" data-level="9.5.2.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines"><i class="fa fa-check"></i><b>9.5.2.2</b> mlr3pipelines</a></li>
</ul></li>
<li class="chapter" data-level="9.5.3" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs.sklearn.pipeline.pipeline"><i class="fa fa-check"></i><b>9.5.3</b> mlr3pipelines vs. sklearn.pipeline.Pipeline</a><ul>
<li class="chapter" data-level="9.5.3.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#sklearn"><i class="fa fa-check"></i><b>9.5.3.1</b> sklearn</a></li>
<li class="chapter" data-level="9.5.3.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-1"><i class="fa fa-check"></i><b>9.5.3.2</b> mlr3pipelines</a></li>
</ul></li>
<li class="chapter" data-level="9.5.4" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs-recipes"><i class="fa fa-check"></i><b>9.5.4</b> mlr3pipelines vs recipes</a><ul>
<li class="chapter" data-level="9.5.4.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#recipes"><i class="fa fa-check"></i><b>9.5.4.1</b> recipes</a></li>
<li class="chapter" data-level="9.5.4.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-2"><i class="fa fa-check"></i><b>9.5.4.2</b> mlr3pipelines</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">mlr3 book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="extending-learners" class="section level2">
<h2><span class="header-section-number">6.1</span> Adding new Learners</h2>
<p>Here, we show how to create a custom mlr3learner step-by-step.
If you want to add a new learner, please follow the instructions on how to <a href="https://github.com/mlr-org/mlr3learners#requestingadding-additional-learners">“Add a new learner”</a>.</p>
<p><strong>Resources for adding a new learner (summary)</strong></p>
<ul>
<li><a href="https://github.com/mlr-org/mlr3learners.template">mlr3learners.template</a></li>
<li><a href="https://mlr3book.mlr-org.com/extending-learners.html">mlr3book section “Adding new learners” including FAQ</a></li>
<li><a href="https://github.com/mlr-org/mlr3learners.template/issues/5">Checklist prior to requesting a review</a></li>
</ul>
<p>This section gives insights on how a mlr3learner is constructed and how to troubleshoot issues.
See the <a href="extending-learners.html#learner-faq">Learner FAQ subsection</a> for help.</p>
<p><strong>(Do not copy/paste the code shown in this section. Use the {mlr3learners.template} to start.)</strong></p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb525-1" data-line-number="1">Learner<span class="op">&lt;</span>type<span class="op">&gt;</span><span class="er">&lt;</span>algorithm<span class="op">&gt;</span><span class="st"> </span><span class="er">=</span><span class="st"> </span><span class="kw">R6Class</span>(<span class="st">&quot;Learner&lt;type&gt;&lt;algorithm&gt;&quot;</span>,</a>
<a class="sourceLine" id="cb525-2" data-line-number="2">  <span class="dt">inherit =</span> Learner<span class="op">&lt;</span>type<span class="op">&gt;</span>,</a>
<a class="sourceLine" id="cb525-3" data-line-number="3"></a>
<a class="sourceLine" id="cb525-4" data-line-number="4">  <span class="dt">public =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb525-5" data-line-number="5"></a>
<a class="sourceLine" id="cb525-6" data-line-number="6">    <span class="co">#&#39; @description</span></a>
<a class="sourceLine" id="cb525-7" data-line-number="7">    <span class="co">#&#39; Creates a new instance of this [R6][R6::R6Class] class.</span></a>
<a class="sourceLine" id="cb525-8" data-line-number="8">    <span class="dt">initialize =</span> <span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb525-9" data-line-number="9">      ps =<span class="st"> </span>ParamSet<span class="op">$</span><span class="kw">new</span>(</a>
<a class="sourceLine" id="cb525-10" data-line-number="10">        <span class="dt">params =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb525-11" data-line-number="11">          <span class="op">&lt;</span>params<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb525-12" data-line-number="12"><span class="st">        </span>)</a>
<a class="sourceLine" id="cb525-13" data-line-number="13">      )</a>
<a class="sourceLine" id="cb525-14" data-line-number="14"></a>
<a class="sourceLine" id="cb525-15" data-line-number="15">      super<span class="op">$</span><span class="kw">initialize</span>(</a>
<a class="sourceLine" id="cb525-16" data-line-number="16">        <span class="dt">id =</span> <span class="st">&quot;&lt;type&gt;.&lt;algorithm&gt;&quot;</span>,</a>
<a class="sourceLine" id="cb525-17" data-line-number="17">        <span class="dt">packages =</span> <span class="st">&quot;&lt;package&gt;&quot;</span>,</a>
<a class="sourceLine" id="cb525-18" data-line-number="18">        <span class="dt">feature_types =</span> <span class="st">&quot;&lt;feature types&gt;&quot;</span></a>
<a class="sourceLine" id="cb525-19" data-line-number="19">        <span class="dt">predict_types =</span> <span class="st">&quot;&lt;predict types&gt;&quot;</span></a>
<a class="sourceLine" id="cb525-20" data-line-number="20">        <span class="dt">param_set =</span> ps,</a>
<a class="sourceLine" id="cb525-21" data-line-number="21">        <span class="dt">properties =</span> <span class="st">&quot;&lt;properties&gt;&quot;</span>,</a>
<a class="sourceLine" id="cb525-22" data-line-number="22">        <span class="dt">man =</span> <span class="st">&quot;&lt;pkgname&gt;::&lt;help file name&gt;&quot;</span></a>
<a class="sourceLine" id="cb525-23" data-line-number="23">      )</a>
<a class="sourceLine" id="cb525-24" data-line-number="24">    },</a>
<a class="sourceLine" id="cb525-25" data-line-number="25"></a>
<a class="sourceLine" id="cb525-26" data-line-number="26">    <span class="co"># optional</span></a>
<a class="sourceLine" id="cb525-27" data-line-number="27">    <span class="dt">importance =</span> <span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb525-28" data-line-number="28"></a>
<a class="sourceLine" id="cb525-29" data-line-number="29">    },</a>
<a class="sourceLine" id="cb525-30" data-line-number="30"></a>
<a class="sourceLine" id="cb525-31" data-line-number="31">    <span class="co"># optional</span></a>
<a class="sourceLine" id="cb525-32" data-line-number="32">    <span class="dt">oob_error =</span> <span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb525-33" data-line-number="33"></a>
<a class="sourceLine" id="cb525-34" data-line-number="34">    }</a>
<a class="sourceLine" id="cb525-35" data-line-number="35">  ),</a>
<a class="sourceLine" id="cb525-36" data-line-number="36"></a>
<a class="sourceLine" id="cb525-37" data-line-number="37">  <span class="dt">private =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb525-38" data-line-number="38"></a>
<a class="sourceLine" id="cb525-39" data-line-number="39">    <span class="dt">.train =</span> <span class="cf">function</span>()</a>
<a class="sourceLine" id="cb525-40" data-line-number="40">    <span class="dt">.predict =</span> <span class="cf">function</span>()</a></code></pre></div>
<p>In the first line of the template, we create a new <a href="https://cran.r-project.org/package=R6">R6</a> class of the learner.
The next line determines the parent class:
Depending on which type of learner we are creating, we need o inherit from its parent class, e.g. for a classification learner from <a href="https://mlr3.mlr-org.com/reference/LearnerClassif.html"><code>LearnerClassif</code></a>.</p>
<p>A learner consists of the following parts:</p>
<ol style="list-style-type: decimal">
<li><a href="extending-learners.html#learner-meta-information">Meta information</a> about the learners</li>
<li><a href="extending-learners.html#learner-train"><code>.train()</code></a> which takes a (filtered) <a href="https://mlr3.mlr-org.com/reference/TaskClassif.html"><code>TaskClassif</code></a> and returns a model</li>
<li><a href="extending-learners.html#learner-predict"><code>.predict()</code></a> which operates on the model in <code>self$model</code> (stored during <code>$train()</code>) and a (differently subsetted) <a href="https://mlr3.mlr-org.com/reference/TaskClassif.html"><code>TaskClassif</code></a> to return a named list of predictions.</li>
<li>(optional) A public <code>importance()</code> or <code>oob_error()</code> method if the learner supports this.</li>
</ol>
<div id="learner-meta-information" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Meta-information</h3>
<p>In the constructor (<code>initialize()</code>) the constructor of the super class (e.g. <a href="https://mlr3.mlr-org.com/reference/LearnerClassif.html"><code>LearnerClassif</code></a>) is called with meta information about the learner which should be constructed.
This includes:</p>
<ul>
<li><code>id</code>: The ID of the new learner. Usually consists of <code>&lt;type&gt;.&lt;algorithm&gt;</code>, for example: <code>&quot;classif.C5.0&quot;</code>.</li>
<li><code>packages</code>: The upstream package name of the implemented learner.</li>
<li><code>param_set</code>: A set of hyperparameters and their descriptions provided as a <a href="https://paradox.mlr-org.com/reference/ParamSet.html"><code>paradox::ParamSet</code></a>.
For each hyperparameter the appropriate class needs to be chosen:
<ul>
<li><a href="https://paradox.mlr-org.com/reference/ParamLgl.html"><code>paradox::ParamLgl</code></a> for scalar logical hyperparameters.</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamInt.html"><code>paradox::ParamInt</code></a> for scalar integer hyperparameters.</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamDbl.html"><code>paradox::ParamDbl</code></a> for scalar numeric hyperparameters.</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamFct.html"><code>paradox::ParamFct</code></a> for scalar factor hyperparameters (this includes characters).</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamUty.html"><code>paradox::ParamUty</code></a> for everything else (e.g. vector paramters or list parameters).</li>
</ul></li>
<li><code>predict_types</code>: Set of predict types the learner is able to handle.
These differ depending on the type of the learner.
<ul>
<li><code>LearnerClassif</code>
<ul>
<li><code>response</code>: Only predicts a class label for each observation in the test set.</li>
<li><code>prob</code>: Also predicts the posterior probability for each class for each observation in the test set.</li>
</ul></li>
<li><code>LearnerRegr</code>
<ul>
<li><code>response</code>: Only predicts a numeric response for each observation in the test set.</li>
<li><code>se</code>: Also predicts the standard error for each value of response for each observation in the test set.</li>
</ul></li>
</ul></li>
<li><code>feature_types</code>: Set of feature types the learner is able to handle.
See <a href="https://mlr3.mlr-org.com/reference/mlr_reflections.html"><code>mlr_reflections$task_feature_types</code></a> for feature types supported by <code>mlr3</code>.</li>
<li><code>properties</code>: Set of properties of the learner. Possible properties include:
<ul>
<li><code>&quot;twoclass&quot;</code>: The learner works on binary classification problems.</li>
<li><code>&quot;multiclass&quot;</code>: The learner works on multi-class classification problems.</li>
<li><code>&quot;missings&quot;</code>: The learner can natively handle missing values.</li>
<li><code>&quot;weights&quot;</code>: The learner can work on tasks which have observation weights / case weights.</li>
<li><code>&quot;parallel&quot;</code>: The learner supports internal parallelization in some way.
Currently not used, this is an experimental property.</li>
<li><code>&quot;importance&quot;</code>: The learner supports extracting importance values for features.
If this property is set, you must also implement a public method <code>importance()</code> to retrieve the importance values from the model.</li>
<li><code>&quot;selected_features&quot;</code>: The learner supports extracting the features which where used.
If this property is set, you must also implement a public method <code>selected_features()</code> to retrieve the set of used features from the model.</li>
</ul></li>
<li><code>man</code>: The roxygen identifier of the learner.
This is used within the <code>$help()</code> method of the super class to open the help page of the learner.
This argument follows the structure <code>&quot;mlr3learners.&lt;package&gt;::mlr_learners_&lt;type&gt;.&lt;algorithm&gt;&quot;</code>.</li>
</ul>
<p>For a simplified <a href="https://www.rdocumentation.org/packages/rpart/topics/rpart"><code>rpart::rpart()</code></a>, the initialization could look like this:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb526-1" data-line-number="1">initialize =<span class="st"> </span><span class="cf">function</span>(<span class="dt">id =</span> <span class="st">&quot;classif.rpart&quot;</span>) {</a>
<a class="sourceLine" id="cb526-2" data-line-number="2">    ps =<span class="st"> </span>ParamSet<span class="op">$</span><span class="kw">new</span>(<span class="kw">list</span>(</a>
<a class="sourceLine" id="cb526-3" data-line-number="3">      ParamDbl<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;cp&quot;</span>, <span class="dt">default =</span> <span class="fl">0.01</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">1</span>, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</a>
<a class="sourceLine" id="cb526-4" data-line-number="4">      ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;xval&quot;</span>, <span class="dt">default =</span> 10L, <span class="dt">lower =</span> 0L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>)</a>
<a class="sourceLine" id="cb526-5" data-line-number="5">    ))</a>
<a class="sourceLine" id="cb526-6" data-line-number="6"></a>
<a class="sourceLine" id="cb526-7" data-line-number="7">    super<span class="op">$</span><span class="kw">initialize</span>(</a>
<a class="sourceLine" id="cb526-8" data-line-number="8">        <span class="dt">id =</span> id,</a>
<a class="sourceLine" id="cb526-9" data-line-number="9">        <span class="dt">packages =</span> <span class="st">&quot;rpart&quot;</span>,</a>
<a class="sourceLine" id="cb526-10" data-line-number="10">        <span class="dt">feature_types =</span> <span class="kw">c</span>(<span class="st">&quot;logical&quot;</span>, <span class="st">&quot;integer&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;factor&quot;</span>),</a>
<a class="sourceLine" id="cb526-11" data-line-number="11">        <span class="dt">predict_types =</span> <span class="kw">c</span>(<span class="st">&quot;response&quot;</span>, <span class="st">&quot;prob&quot;</span>),</a>
<a class="sourceLine" id="cb526-12" data-line-number="12">        <span class="dt">param_set =</span> ps,</a>
<a class="sourceLine" id="cb526-13" data-line-number="13">        <span class="dt">properties =</span> <span class="kw">c</span>(<span class="st">&quot;twoclass&quot;</span>, <span class="st">&quot;multiclass&quot;</span>, <span class="st">&quot;weights&quot;</span>, <span class="st">&quot;missings&quot;</span>)</a>
<a class="sourceLine" id="cb526-14" data-line-number="14">        <span class="dt">man =</span> <span class="st">&quot;mlr3learners.rpart::mlr_learners_classif.rpart&quot;</span></a>
<a class="sourceLine" id="cb526-15" data-line-number="15">    )</a>
<a class="sourceLine" id="cb526-16" data-line-number="16">}</a></code></pre></div>
<p>We only have specified a small subset of the available hyperparameters:</p>
<ul>
<li>The complexity <code>&quot;cp&quot;</code> is numeric, has a feasible range of <code>[0,1]</code> and defaults to <code>0.01</code>.
The parameter is used during <code>&quot;train&quot;</code>.</li>
<li>The complexity <code>&quot;xval&quot;</code> is integer has a lower bound of <code>0</code>, a default of <code>0</code> and the parameter is used during <code>&quot;train&quot;</code>.</li>
</ul>
</div>
<div id="learner-train" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Train function</h3>
<p>Let’s talk about the <code>.train()</code> method.
The train function takes a <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a> as input and must return a model.</p>
<p>Let’s say we want to translate the following call of <code>rpart::rpart()</code> into code that can be used inside the <code>.train()</code> method.</p>
<p>First, we write something down that works completely without <code>mlr3</code>:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb527-1" data-line-number="1">data =<span class="st"> </span>iris</a>
<a class="sourceLine" id="cb527-2" data-line-number="2">model =<span class="st"> </span>rpart<span class="op">::</span><span class="kw">rpart</span>(Species <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> iris, <span class="dt">xval =</span> <span class="dv">0</span>)</a></code></pre></div>
<p>We need to pass the formula notation <code>Species ~ .</code>, the data and the hyperparameters.
To get the hyperparameters, we call <code>self$param_set$get_values()</code> and query all parameters that are using during <code>&quot;train&quot;</code>.</p>
<p>The dataset is extracted from the <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a>.</p>
<p>Last, we call the upstream function <code>rpart::rpart()</code> with the data and pass all hyperparameters via argument <code>.args</code> using the <code>mlr3misc::invoke()</code> function.
The latter is simply an optimized version of <code>do.call()</code> that we use within the mlr3 ecosystem.</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb528-1" data-line-number="1">.train =<span class="st"> </span><span class="cf">function</span>(task) {</a>
<a class="sourceLine" id="cb528-2" data-line-number="2">  pars =<span class="st"> </span>self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>)</a>
<a class="sourceLine" id="cb528-3" data-line-number="3">  mlr3misc<span class="op">::</span><span class="kw">invoke</span>(rpart<span class="op">::</span>rpart, task<span class="op">$</span><span class="kw">formula</span>(),</a>
<a class="sourceLine" id="cb528-4" data-line-number="4">    <span class="dt">data =</span> task<span class="op">$</span><span class="kw">data</span>(), <span class="dt">.args =</span> pars)</a>
<a class="sourceLine" id="cb528-5" data-line-number="5">}</a></code></pre></div>
</div>
<div id="learner-predict" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Predict function</h3>
<p>The internal predict method <code>.predict()</code> also operates on a <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a> as well as on the fitted model that has been created by the <code>train()</code> call previously and has been stored in <code>self$model</code>.</p>
<p>The return value is a <a href="https://mlr3.mlr-org.com/reference/Prediction.html"><code>Prediction</code></a> object.
We proceed analogously to what we did in the previous section.
We start with a version without any <code>mlr3</code> objects and continue to replace objects until we have reached the desired interface:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb529-1" data-line-number="1"><span class="co"># inputs:</span></a>
<a class="sourceLine" id="cb529-2" data-line-number="2">task =<span class="st"> </span><span class="kw">tsk</span>(<span class="st">&quot;iris&quot;</span>)</a>
<a class="sourceLine" id="cb529-3" data-line-number="3">self =<span class="st"> </span><span class="kw">list</span>(<span class="dt">model =</span> rpart<span class="op">::</span><span class="kw">rpart</span>(task<span class="op">$</span><span class="kw">formula</span>(), <span class="dt">data =</span> task<span class="op">$</span><span class="kw">data</span>()))</a>
<a class="sourceLine" id="cb529-4" data-line-number="4"></a>
<a class="sourceLine" id="cb529-5" data-line-number="5">data =<span class="st"> </span>iris</a>
<a class="sourceLine" id="cb529-6" data-line-number="6">response =<span class="st"> </span><span class="kw">predict</span>(self<span class="op">$</span>model, <span class="dt">newdata =</span> data, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb529-7" data-line-number="7">prob =<span class="st"> </span><span class="kw">predict</span>(self<span class="op">$</span>model, <span class="dt">newdata =</span> data, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>)</a></code></pre></div>
<p>The <a href="https://www.rdocumentation.org/packages/rpart/topics/predict.rpart"><code>rpart::predict.rpart()</code></a> function predicts class labels if argument <code>type</code> is set to to <code>&quot;class&quot;</code>, and class probabilities if set to <code>&quot;prob&quot;</code>.</p>
<p>Next, we transition from <code>data</code> to a <code>task</code> again and construct a proper <a href="https://mlr3.mlr-org.com/reference/PredictionClassif.html"><code>PredictionClassif</code></a> object which should be returned.
Additionally, as we do not want to run the prediction twice, we differentiate what type of prediction is requested by querying the chosen predict type of the learner.
The predict type is stored in the <code>$predict_type</code> slot of a learner class.</p>
<p>The final <code>.predict()</code> method looks like this:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb530-1" data-line-number="1">.predict =<span class="st"> </span><span class="cf">function</span>(task) {</a>
<a class="sourceLine" id="cb530-2" data-line-number="2">  self<span class="op">$</span>predict_type =<span class="st"> &quot;response&quot;</span></a>
<a class="sourceLine" id="cb530-3" data-line-number="3"></a>
<a class="sourceLine" id="cb530-4" data-line-number="4">  <span class="cf">if</span> (self<span class="op">$</span>predict_type <span class="op">==</span><span class="st"> &quot;response&quot;</span>) {</a>
<a class="sourceLine" id="cb530-5" data-line-number="5">    response =<span class="st"> </span><span class="kw">predict</span>(self<span class="op">$</span>model, <span class="dt">newdata =</span> task<span class="op">$</span><span class="kw">data</span>(), <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb530-6" data-line-number="6">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb530-7" data-line-number="7">    prob =<span class="st"> </span><span class="kw">predict</span>(self<span class="op">$</span>model, <span class="dt">newdata =</span> task<span class="op">$</span><span class="kw">data</span>(), <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>)</a>
<a class="sourceLine" id="cb530-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb530-9" data-line-number="9"></a>
<a class="sourceLine" id="cb530-10" data-line-number="10">  PredictionClassif<span class="op">$</span><span class="kw">new</span>(task, <span class="dt">response =</span> response, <span class="dt">prob =</span> prob)</a>
<a class="sourceLine" id="cb530-11" data-line-number="11">}</a></code></pre></div>
<p>Note that if the learner would need to handle hyperparameters during the predict step, we would proceed analogously to the <code>.train()</code> step and use <code>self$params$get_values(tags = &quot;predict&quot;)</code> in combination with <a href="https://mlr3misc.mlr-org.com/reference/invoke.html"><code>mlr3misc::invoke()</code></a>.</p>
<p>Also note that you cannot rely on the column order of the data returned by <code>task$data()</code>: The order of columns may be different from the order of the columns during <code>$train()</code>.
You have to make sure that your learner accesses columns by name, not by position (like some algorithms with a matrix interface do).
You may have to restore the order manually here, see learner <a href="https://github.com/mlr-org/mlr3learners/blob/master/R/LearnerClassifSVM.R">“classif.svm”</a> for an example.</p>
</div>
<div id="learner-control" class="section level3">
<h3><span class="header-section-number">6.1.4</span> Control objects/functions of learners</h3>
<p>Some learners rely on a “control” object/function such as <code>glmnet::glmnet.control()</code>.
Accounting for such depends on how the underlying package works:</p>
<ul>
<li>If the package forwards the control parameters via <code>...</code> and makes it possible to just pass control parameters as additional parameters directly to the train call, there is no need to distinguish both <code>&quot;train&quot;</code> and <code>&quot;control&quot;</code> parameters.
Both can be tagged with “train” in the ParamSet and just be handed over as shown previously.</li>
<li>If the control parameters need to be passed via a separate argument, the parameters should also be tagged accordingly in the ParamSet.
Afterwards they can be queried via their tag and passed separately to <code>mlr3misc::invoke()</code>.
See example below.</li>
</ul>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb531-1" data-line-number="1">control_pars =<span class="st"> </span>mlr3misc<span class="op">::</span>(<span class="op">&lt;</span>package<span class="op">&gt;</span><span class="er">::&lt;</span><span class="cf">function</span><span class="op">&gt;</span>,</a>
<a class="sourceLine" id="cb531-2" data-line-number="2">   self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;control&quot;</span>))</a>
<a class="sourceLine" id="cb531-3" data-line-number="3"></a>
<a class="sourceLine" id="cb531-4" data-line-number="4">train_pars =<span class="st"> </span>self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>)<span class="er">)</span></a>
<a class="sourceLine" id="cb531-5" data-line-number="5"></a>
<a class="sourceLine" id="cb531-6" data-line-number="6">mlr3misc<span class="op">::</span><span class="kw">invoke</span>([...], <span class="dt">.args =</span> train_pars, <span class="dt">control =</span> control_pars)</a></code></pre></div>
</div>
<div id="learner-test" class="section level3">
<h3><span class="header-section-number">6.1.5</span> Testing the learner</h3>
<div id="train-and-predict" class="section level4">
<h4><span class="header-section-number">6.1.5.1</span> Train and Predict</h4>
<p>For a bare-bone check you can just try to run a simple <code>train()</code> call locally.</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb532-1" data-line-number="1">task =<span class="st"> </span><span class="kw">tsk</span>(<span class="st">&quot;iris&quot;</span>) <span class="co"># assuming a Classif learner</span></a>
<a class="sourceLine" id="cb532-2" data-line-number="2">lrn<span class="op">$</span><span class="kw">train</span>(task)</a>
<a class="sourceLine" id="cb532-3" data-line-number="3">p =<span class="st"> </span>lrn<span class="op">$</span><span class="kw">predict</span>(task)</a>
<a class="sourceLine" id="cb532-4" data-line-number="4">p<span class="op">$</span>confusion</a></code></pre></div>
<p>To ensure that your learner is able to handle all kinds of different properties and feature types, we have written an “autotest” that checks the learner for different combinations of such.</p>
<p>The “autotest” setup is already included in the mlr3learners.template skeleton.
For some learners that have required parameters, it is needed to set some values for required parameters after construction so that the learner can be run in the first place.</p>
<p>You can also exclude some specific test arrangements within the “autotest” via argument <code>exclude</code> in the <code>run_autotest()</code> function.
Currently the <code>run_autotest()</code> function lives in <a href="https://github.com/mlr-org/mlr3/blob/f16326bf34bcac59c3b0a2fdbcf90dbebb3b4bbc/inst/testthat/helper_autotest.R">inst/testthat</a> of the <code>mlr_plkg(&quot;mlr3&quot;)</code> and still lacks documentation.
This should change in the near future.</p>
<p>To finally run the test suite, call <code>devtools::test()</code> or hit <code>CTRL + Shift + T</code> if you are using RStudio.</p>
</div>
<div id="checking-parameters" class="section level4">
<h4><span class="header-section-number">6.1.5.2</span> Checking Parameters</h4>
<p>Some learners have a high number of parameters and it is easy to miss out on some during the creation of a new learner.
In addition, if the maintainer of the upstream package changes something with respect to the arguments of the algorithm, the learner is in danger to break.
Also, new arguments could be added upstream and manually checking for new additions all the time is tedious.</p>
<p>Therefore we have written a “Parameter Check” that runs for every learner asynchronously to the R CMD Check of the package itself.
This “Parameter Check” compares the parameters of the mlr3 ParamSet against all arguments available in the upstream function that is called during <code>$train()</code>.</p>
<p>It comes with an <code>exclude</code> argument that should be used to <em>exclude and explain</em> why certain arguments of the upstream function are not within the ParamSet of the mlr3learner.
This argument needs essentially to be used by every learner because arguments like <code>x</code>, <code>target</code> or <code>data</code> are handled by the mlr3 interface and are therefore not included within the ParamSet.</p>
<p>However, there might be more parameters that need to be excluded:</p>
<ul>
<li>Type dependent parameters, i.e. parameters that only apply for classification or regression learners.</li>
<li>Parameters that are actually deprecated by the upstream package and which were therefore not included in the mlr3 ParamSet.</li>
</ul>
<p>The “Parameter Check” should run for each implemented learner.
All excluded parameters should have a comment justifying their exclusion.</p>
<p>Whenever the “Parameter Check” breaks in the CI run, maintainers can be sure that a new parameter was added or removed in the upstream package.
Also, people taking over a learner package can instantly see why certain parameters were not included into the ParamSet initially.</p>
</div>
</div>
<div id="learner-faq" class="section level3">
<h3><span class="header-section-number">6.1.6</span> Learner FAQ</h3>
<p><strong>Question 1</strong></p>
<p>How to deal with Parameters which have no default?</p>
<p><strong>Answer</strong></p>
<p>Do not set a default in the ParamSet and add <code>tags = &quot;required&quot;</code> to the Parameter.</p>
<p><strong>Question 2</strong></p>
<p>Where to add the package of the upstream package in the DESCRIPTION file?</p>
<p>Add it to the “Imports” section.
This will install the upstream package during the installation of the mlr3learner if it has not yet been installed by the user.</p>
<p><strong>Question 3</strong></p>
<p>How to handle arguments from external “control” functions such as <code>glmnet::glmnet_control()</code>?</p>
<p><strong>Answer</strong></p>
<p>See <a href="https://mlr3book.mlr-org.com/extending-learners.html#learner-control">“Control objects/functions of learners”</a>.</p>
<p><strong>Question 4</strong></p>
<p>How to document if my learner uses a custom default value that differs to the default of the upstream package?</p>
<p><strong>Answer</strong></p>
<p>If you set a custom default for the mlr3learner that does not cope with the one of the upstream package (think twice if this is really needed!), add this information to the help page of the respective learner.</p>
<p>You can use the following skeleton for this:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb533-1" data-line-number="1"><span class="co">#&#39; @section Custom mlr3 defaults:</span></a>
<a class="sourceLine" id="cb533-2" data-line-number="2"><span class="co">#&#39; - `&lt;parameter&gt;`:</span></a>
<a class="sourceLine" id="cb533-3" data-line-number="3"><span class="co">#&#39;   - Actual default: &lt;value&gt;</span></a>
<a class="sourceLine" id="cb533-4" data-line-number="4"><span class="co">#&#39;   - Adjusted default: &lt;value&gt;</span></a>
<a class="sourceLine" id="cb533-5" data-line-number="5"><span class="co">#&#39;   - Reason for change: &lt;text&gt;</span></a></code></pre></div>
<p><strong>Question 5</strong></p>
<p>When should the <code>&quot;required&quot;</code> tag be used when defining Params and what is its purpose?</p>
<p><strong>Answer</strong></p>
<p>The <code>&quot;required&quot;</code> tag should be used when the following conditions are met:</p>
<ul>
<li>The upstream function cannot be run without setting this parameter, i.e. it would throw an error.</li>
<li>The parameter has no default in the upstream function.</li>
</ul>
<p>In mlr3 we follow the principle that every learner should be constructable without setting custom parameters.
Therefore, if a parameter has no default in the upstream function, a custom value is usually set for this parameter in the mlr3learner (remember to document such changes in the help page of the learner).</p>
<p>Even though this practice ensures that no parameter is unset in an mlr3learner and partially removes the usefulness of the <code>&quot;required&quot;</code> tag, the tag is still useful in the following scenario:</p>
<p>If a user sets custom parameters after construction of the learner</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb534-1" data-line-number="1">lrn =<span class="st"> </span><span class="kw">lrn</span>(<span class="st">&quot;&lt;id&gt;&quot;</span>)</a>
<a class="sourceLine" id="cb534-2" data-line-number="2">lrn<span class="op">$</span>param_set<span class="op">$</span>values =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;&lt;param&gt;&quot;</span> =<span class="st"> </span><span class="er">&lt;</span>value<span class="op">&gt;</span>)</a></code></pre></div>
<p>Here, all parameters besides the ones set in the list would be unset.
See <code>paradox::ParamSet</code> for more information.
If a parameter is tagged as <code>&quot;required&quot;</code> in the ParamSet, the call above would error and prompt the user that required parameters are missing.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="extending.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="extending-measures.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mlr-org/mlr3book/edit/master/bookdown/06-extending-learners.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/mlr-org/mlr3book/commits/master/06-extending-learners.Rmd",
"text": "Edit history"
},
"view": {
"link": null,
"text": null
},
"download": [["mlr3book.pdf", "PDF"]],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
